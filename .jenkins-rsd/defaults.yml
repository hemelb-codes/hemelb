- defaults:
    name: global
    # where to get the code from
    scm:
        - git:
            url: git@github.com:UCL-CCS/hemelb-dev.git
            browser: githubweb
            branches:
                - '{branch}'
            browser-url: https://github.com/UCL-CCS/hemelb-dev
            submodule:
                recursive: true
            wipe-workspace: true
            refspec: '{refspec}'

    properties:
        - slack:
            notify-start: false
            notify-success: false
            notify-aborted: false
            notify-notbuilt: true
            notify-unstable: true
            notify-failure: true
            notify-backtonormal: true
            notify-repeatedfailure: true
            include-test-summary: false
            show-commit-list: true
            room: '#hemelb'
            token: !include ucl-ccs-slack-token
            team-domain: ucl-ccs

        - github:
            url: https://github.com/UCL-CCS/hemelb-dev

    publishers:
        - slack:
            team-domain: ucl-ccs
            token: !include ucl-ccs-slack-token
            build-server-url: http://development.rc.ucl.ac.uk/jenkins/
            room: '#hemelb'

    project-type: matrix
    concurrent: true
    execution-strategy:
        combination-filter: >
            (compiler == "intel").implies(os == "LegionRHEL7")
            && (compiler == "clang").implies(os == "Mavericks")
            && (compiler == "gnu").implies(os == "LegionRHEL7")
        sequential: false

    axes:
        - axis:
            type: slave
            name: os
            values:
                - Mavericks
                - LegionRHEL7
        - axis:
            type: user-defined
            name: compiler
            values:
                - clang
                - intel
                - gnu
